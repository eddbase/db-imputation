1) Install homebrew for x64
2) Install python 2 for x64 + numpy
3) Enable python 2 in the shell
4) Install the custom postgres formula https://github.com/petere/homebrew-postgresql for x64, changing the python version and the python env path in the script 
(/usr/local/Homebrew/Library/Taps/petere/homebrew-postgresql/postgresql@14.rb -> /opt/homebrew/anaconda3/envs/intel_py2/bin/python)
INITDB if needed
/usr/local/opt/postgresql@12/bin/initdb /usr/local/var/postgres -E utf8
5) Start the x64 version of postgres arch -x86_64 /usr/local/opt/postgresql@14/bin/pg_ctl -D /usr/local/var/postgresql@14/ start
6) Install psql from https://github.com/petere/homebrew-postgresql
7) Copy libpython2.7.dylib in /usr/local/lib
8) in postgres CREATE EXTENSION plpython2u;
9) compile madlib in a python 2 environment setting -DCXX11=1, ignoring the error during make
10) cmake -DCXX11=1 -DCMAKE_SYSTEM_NAME=Darwin -DCMAKE_SYSTEM_PROCESSOR=x64 ..
11) symlink pg_ctl: ln -s /usr/local/opt/postgresql@14/bin/pg_ctl /usr/local/bin
12) arch -x86_64 make -j8
13) arch -x86_64 ./madpack -s madlib -p postgres -c <>@localhost:5432/postgres install

PYTHON=/afs/inf.ed.ac.uk/user/s21/s2121589/.conda/envs/python2/bin/python2.7 ./madpack -s madlib -p postgres -c s2121589@localhost:5432/postgres reinstall


PYTHON=/afs/inf.ed.ac.uk/user/s21/s2121589/.conda/envs/python2/bin/python2.7 ./madpack -s madlib -p postgres -c s2121589@localhost:5432/postgres reinstall

PYTHON=/Users/janedoe/anaconda/bin/python


./configure --with-python PYTHON=


bin/psql -h /tmp postgres

START POSTGRES WITH CONDA ENV!!!!


source /opt/conda/etc/profile.d/conda.sh
conda activate imputation
python -m mindsdb

bin/pg_ctl -D data/ start

tmux attach-session


nohup ./clickhouse server &